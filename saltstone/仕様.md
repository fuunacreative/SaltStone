# kaze talk 仕様

# voiceを別dllにする必要があるか？
queueを使う必要はない、、、


## 構成
1. avuitl plugin(c++ dll)
1. aviutlへ字幕、顔を表示展開するexe (kazetalk batch)
1. 台本を作成するexe(kazetalk)
1. aviutlと連携して顔imgを作成するexe
1. sqlite dll

## 問題
1. GCMZ dropはどこでやる？
  wav,txtが作成され、aviへ貼り付ける際のトリガーはどうする？
1. plugin sdkとluaで展開される顔dllは別にするべきか？
  この場合、ipcはどうするか？
1. 顔を作るexeとini・ｄｂの設定読み込みのipcはどうするか？
  別exeにするべきか？一緒にするべきか？
  -> aviからcallされるdllは最小限にしたい
  -> dllから直接 rectへ描画する事も可能 disp_filterを参照
1.どうやって顔描画を行うか?
  まず、キャラID(霊夢 or r or reimu) + パーツID(B00E00など)が必要
  さらに、素材ディレクトリの場所、キャッシュディレクトリの場所
  ini or settingdbの読み込みが必要
  読み込みはc#のsupportexeにまかせるとして、どうやってdllから読み出すか？
  1. 名前つき共有メモリ、named pipe
    必要なパラメータが多ければ共有メモリ、　そうでないならnamed pipe
    共有メモリの場合は、可変長文字列をどう扱うか？　実装する必要がある
1. まず何をやるか？
  iniファイル・ｄｂのパラメータ読み込み 特にproject dir(aupファイルの場所)
  aviutlが起動され、aupがオープンされたら、supportexeを呼び出し、project dirを保存する
  aviutl/kazetalk/kazetalk.dbに保存
  名前？

## nuget library
1. readjenc 文字コード判定
1. system.data.sqlite sqliteのｄｂ

## iniの場所
aviutil/kazetalk/
  iniファイルには固定の設定
  kazetalk.dbには変動する設定
キャラdbはどこにおくか？
  kazetalkchara.db
  dir形式とpsd形式の２つある




https://e.developer.yahoo.co.jp/dashboard/app.detail/O3CB0Q6zoU4sTcI-

Client ID：
dj00aiZpPXlwSmtFN1RxbXVsNyZzPWNvbnN1bWVyc2VjcmV0Jng9YWI-
